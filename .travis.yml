sudo: required
services:
  - docker
language: php
php:
  - '7.0'
before_install:
  - pecl install mongodb
install:
  - make bootstrap
before_script:
  - ./scripts/travis-setup.sh
script:
  - make tests
deploy:
  provider: script
  script: ./scripts/travis-deploy.sh
  on:
    branch: master
env:
  global:
  # MONGO_HOST
  - MONGO_HOST=127.0.0.1
  # DOCKER_LOGIN
  - secure: QK1b8/xezk/+Ewhghk0iZJ/a04OlCIQufinG5r8vfbvz13GNoIhCnjTpGZ+ycqgA5oXUPUrMKI4SjdW7hvQq1fRBjbEgqj2/doCJouiHug4h06ldbwZ9v73rMhBjbi/V2cbXn4PFVTSKBiuog0LUsgbHMjPAObR9BBJUUsiCBXIr0O3HhLKwF1hNj+5np8JnRMtUD5fBaUTFAlXOv2gWA5ChiXDA6J5QMD56elfk1G8XaBGSncyzbTHkzHMXxoJkvSOlj2mNlVWcC7pJnK9TeIUzaqXk34mCavmxLNwuUMzhPddDcTNyuIqWNFoxjPUTK9O+5x72HBNKB3WmRAOD+n/zIpoxcYOBRtaL/UblVQF1tmuJ21xQaB+1jVbKJB9QlYYmpmnJkX5GVplNYXrNethJLgVIs/2tJLZtpr49m64LGxRr9Cb7sHQyzLliYXxOGZH/w/yZdYAWzzFS0EM8qMzziBHshhYLiuJSezFtU7R9ETtZKISW0JDF+9jH3wo+jZpE/ewZGn4mFFNl8x7hn/25LXTWE2+ePhMMrAc2f8VC/8HKXBHCrAw3DKtopfIFDQl/V/VYFw9oAuDy1n2j4jr24/3mQXrQ5bWky4hVy8lsB3Uq3MpwNs2plFUafe6Ec0azzeUn21Bv4Rxyy2vUgOY2oHLxJrGTyoXJa8xqBJc=
  # DOCKER_PASSWORD
  - secure: F86RO2hyoyMRFUe9TKA8CMLwkQCXd+7MprkGBTjo1jvvzwDoYi1A05QbAbHaJzrAaXaYykMlOxGPJimHuQtXVBeXnRy8eiqPHyB+Mt8oP3stRYg3wAlfecU91/s/jeL5npIX1RU1vqUg1f09tnU4CVSWLo7/J/ZbfBwoH4YLlhlF76ZKSn9DpKSnPOUA/ofwSiEG0v4NgyzjkC/Bq0CJs/4ZQ9KaFXEINoHiQCGHdHCG+hyN4z0DQ+GxeRTFKEKCLXa+zWaXxwMWH5477Prf8x3GHB1UiXSChuB1yGfDr4kCQxxmbHL3SqyIq+m9ncWDOz6MBcQWTwOAtvZR39tXMiYJ62g8G6k67rFaa3PVT8zwi7Bsh327Bdkupo2uYXAC+6CXU5t4jkfW+k1Hll3Y8NdLx1TJ54bMOCLwabJ0jyAjVD55QXtqh433LYSuGE8Yksc99FD/PlLmHV1rdhK7D79gJGq2w2saR14qciRcA29kNj6b0uYePmtOdcvcMwfRiKiUXYcfBezwv41U2d4ZYdUTkaoALs9alKMNAB9MhPsy0DeBP5pSka1k7aXFXiLxH+Bs0JUcmvCsyvHwRuly1SI4fKGSX21qHk650lDPp7hpyiJ35myG8IODeLicWpvhobsQ0e91pxEZzcofzPBEGPTBp/6yXb418OoRPnA9RZQ=
  # WONDERLAND_USER
  - secure: JnN9mzJKbLPfrBk2bRILjewAWN1fgvZGtdAXIasyMY+jZmC2iWfSMXV8VW5Yo1srTmhBTFRe2kW847ZLY3CgRVqJ6syMvP4V10oD479TTJPVFyRkv/VdLl0C4RjbZvDeSYNRBTDFYxLcl66+AzCjLunckhKuSy56sVCJBjit3/fPDxUo9RhEhXEdPwN0UxNeEB7Gyyr7lJKItqjaQtr0Taa9oQQP7yA1/ZwhSF8a3i7vZL1Ni05+Un2zNWL8sKXoIHXc/BugxGO/u8XUdUAuBU+p8jVZhaE5dLQ2PmpCitwLWTOydL4WAzr/9sdm938ihFuFV3i1c3nJ6/pVpmwxGJKjpyw7YQrJS6tQ5YqV0N2Op49TjElg9qEGpimV3OyttPD6drZEC/pCymjSNhMPi96cu1JL3IMtqLjQFPlMlYsT1dAfrbXqYvk8l4VOwe04HGyjt6FAlBHUTmIW01Bhr1XYQJEvgr9YV4YjzjVMzt7+HRaScPRixm4M2x+GcJ10JTDC9D5uozTJfoVYA7FyxDpnAtQeOnFv5eAQZ7FyJNI4iX1cFbnItCMD/oNNheOO4YzdhJ+cLAazy5ntoCw1O28Cci2+v7JRZuUtcSpbSG1VO38hfYXQ8JSop1Dl5X8tQ5JuNKeeMH7jfSRcFwVVHdyJai9bjGmV9F4/4hivorE=
  # WONDERLAND_PASS
  - secure: CwfzF0vXDdrOQl/1Xwhc1s55NiV/WO23eyOA6G5WaDaWZHHWlQzSXhjH6eUJImz8v5qFUFeddQ9DXFUAuSBwhsnYYG63ZyT3IOglKdf0Vj0fjuBnoLePl5a6HAm+6+DQ9zEi6KLyVTqB81JtkzqbDPQX3Tdva8J1nDhuEbx0snjIimajHjafXMsz9qvOvXdQNfrb2qnS0QN/lQtihTYgjt/zWwpDoy3ctAq+gb1iABtZhaO8DEaqfNCjqnRAZFanf59T8kUkn83TO7raHnTwIBOVWnm412NOTbmVpRYbf+YOQOsnbCrnj84JdGeHyU352GYNLUvkEVJe+7pzjnayIzEN4m5zk+78OM536Jh//kg/H76lgDTl/PKb+YDy+J0i1+DkXlaj6WkzKGgXsfeU3/A36H/Cooi0hvVDU/D9zPzkgPFmjQ2TzafvljU31xpyEKFo+yhIU68CnQmJBlKXakqgxkgN3AHg+J3I03EhuGrXdNz1bqNV+Ox4jQSX56PCfbyVaASs2ClhV9KxG2ZPPJsFwatQ/MZDOPSvkmIvvCO5p8lsZy2AAvvGWeE7QFfWIlP0L6gvwoqTRSG8RHlNl/kGyPUNJzN2nRW1FMKh+BxrbXdel95Zy3XW/EulXYTINtTl5xBpRtIWQgQn6h323QK71ukbhrDPb43t8Wsu7Lc=
  # APPLICATION_ENV
  - secure: shRwJiwE1GJL6VL1JIdOkWyiRo2jPucv7D7FyAbfmII9pI0Lu9FgCKze0J1TV8SQMteGUbexeJK09IYmpPV+CTRQIDKdk5h2OEYaDRY/t1GAPX9UXrYiOUQD1uUdF6Dmm18aKEkhjzAy6LdNsduWlm0dwKOXATbi0kIliMxKd2SYifWRBhzD7L89+75q67OQD0fcbqLx4hcPtlxzI1OjDVyI2imv5ekXeAC6A+RAtU2xlzxuS0iXg7LOfqSzGPnRUcpIyxjwXBUbbGtouKqg23Qa+AN/3DDjIECglRlInnSArXDMaoPWoHWV1deY1UV3n2Birc/zAG5BIXE/Xhkf7mdhYZGKZ4u1iZQ/UQap2FPscTfU7kt25+hVO/DOHWifxIiYgBiFeBGcrN71KGvw2eYdVAfvyV3JmW3mkz1wBosuMMSI3WDpJmXkDti08GuDPELVWE40jI3VNJtplfnTXOGRqN0WpwX8jDVbk44gE+K0oJwdcENtP+N+7Jw5Bui+Wn870tjwyGxcXC3mrFQQt1sxCp+DB38n6AL6JPdAYDIy1DvZsvaYpasAM/lrRoEInKoVK8UcN4CwxDMLA6LnVq/Q3rH7dvInR3Jj5eKwLJ0Ne0nn5aGljTQOHSjZ5hOEgv3+/8iBJTrrMj0FolsGMwJA5y3Tm416yxmLQd8DJG0=
  # MONGO_USERNAME
  - secure: AZADF84xEeQymz8AVDP1bOR1ACdbg8AV7snVwaKZuNXB011RUWvQAaoqOAAaMC2Sdjm2REfZfJGgJADcsSPTCorLIy4NNDWPsIyBUgEOWNWErYPmA2c1IXIE5Fpey46O5jSn9BjYzDeCdhbBEkg5mAsw93LyFDLEgvqboVhVZdLRQVJ98eyDba/Swf/lp6uDIYOj2KS1wBPXhsouh8wZ217+C3b0HyGQ8D+6ZU0YVz0/3uGBpO7nrIjYH8L2i5AnE7KZXpbTrcYLtVAWe4Bxr/LcBKNd4wF2umqcWT3GI2L6NocJ7RBK52lIXE8977W+uXJTRoP2njPjKH5t9Nmfk/9gfYh3VYgU2Ws7CgDsXIKQBNg7R2+4GYLATnbSuJU4+X7qU1z/3LX3TNK3vHPiJeWAqw8Zktx8k22hoDgChkNYkD/i9wHFbYEmUAvil0Jv5hARCZBLBxZBouXiNYyhL1Q0wWE6DgKhDQyaMVNibxYGSCXnErE2xO+JHrW24oWek7TzslA6SMto/3cKEOQHWXvZWqEQVJETGRf1xJ7PGEGXhRWLpn3B2izhSxNYGyO+P8rF6yBbZ6ytVm/FP6NjmqsY8SiTaiI/wxHuEwN1OmKvNP523y5IBjAb38ZppNAiMv/xAi+bM88FY1UOxTu5RhAGmGCQpo58HSKaGQl6PX8=
  # MONGO_PASSWORD
  - secure: hjXBjSDqyb0DNCINvN7tqqHV9nXw2hecDpcYhL6FaOQtU80jXdYKafDE/HinHRNxqlh5+egLG2aXCV5NfmMDG/8xhxLKOWx4u7d3sy596JVWLSfo5lgRIXzwB8lWjbPwfr6+6yfgucGHiXdDko2SFXs7oeVM4UPLKYNg5jSVG+8eS+gs9GiV/rF1mQwekMVLwZjsDKFQNnsh20BuoXDR50o/+jicPPekA3zJ4ysnGxn4bXYig57V5b4zs2B97qO8VQvXLaYhNH4i1lieboPz9ek6OiY95/kXBAW8AaggYZtrtbP/EVvhpPcgrRafAUzGUJe52XwkSb1Vb6nDp0BoK/up/ZFz2UBKkxbM30T9flcoK8DjYGiJYZFqDNr0trxzh8LMbu/XGySGR5GaObwEa0jQ8LNVMJHO/MbWWl/iqM2QNhe0S4lnsV3eL/JZn/FqAYXV1zdR8iQ+JQO6xZUcvwRCQ6iLX5vfGLxyqCKUEdDeKo9afMEiS0mndfY9R0qpYSmfLjYIRRUp/0CiLmtsBZO2Al8joy/jt54g6SXELDdhnPW+0lnMIJrDqS6pWMgn2PiMIca4H1+2u9HHWhqqrWqx5Yv5xwsV/o8IqqBhW2gXq3GnQb8G4x+dY7yurF9qgQPk2vVnaLGV2tV2dawJqqjWyw3iSw9WYLZSsc8qSbw=

notifications:
  slack:
    secure: J8NSx/Xi1kCbCp7WB67cahZDiW9y6SZTEyWhDCJKgorAjOWBavdtG6TJ61REC0TjmXb4ZEJ6oqn9Ijuew5poPf+oyKEpbnV5YQjzhnQax6D/nOvNNCm1/r6u7FhYJGDPFVYNZoBvMQ8Os6Y3wcKlxnmeEC/9tgvVZYntol/MbKRcVqforu1Liaf1s0Kxk22Gg0veVCim1wFQXTD7YC5M6VOog/ST0yijEy3NTtsvGlLA4LKHhjt7nqt5li1DIXxHpEcbai6joElQRXd58o1+6BYPyGauUy55FvN2o8HOvbJYykZJ/L4m4HZLPBm/VzDZbtUvq9PoM7x+/slQFfXy6c2qEyGjQn9SfwEUG20vemlqnGtbaWWcXB7CJ3ur1QzML9TW/sqjgTJabbtIT27g9Re6KJjMqMuncJlFPDqG4bsUxffBnfSefKYCnWE5eYclD3USkC6cc6EhitbVTfPuKtZ8WHL4pHPFhBufzq8ZuRNdaK27d86AgYJsYdQn+8gPsy3EwVkGT3at2kVQhBvdzk/JwekYOuYT1GaP61Mcc4RLE43gVn6xfuUOOuzOF+vozWUdPPmhSx5+UwE8mTbCOC61GQFQS3J2p+AJXSpJMbs8mKDx50rPE7zJXq5Mw2vc8ff2mzSv3VJ2W+rcbKuwWtY8AkgWcgY5mizcT3g9lWg=
